---
id: api-package
title: API Package
sidebar_label: API Package
keywords: ["webiny", "scaffold", "boilerplate", "api"]
description: Quickly create and deploy API package.
---

:::tip WHAT YOUâ€™LL LEARN
- what are scaffolds
- how to quickly create a functional API package
:::


## Prerequisites
Before you start this tutorial, make sure that you have Webiny installed and to read our [Intro](./create-an-application-intro) tutorial.


## Overview
The API scaffold is our boilerplate code that works out of the box without you needing to actually write any code.
In this article we will go through the process of generating the code.

The command you will need is `yarn webiny scaffold`.

In our example we will use `CarManufacturer` as our reference.

## Running the Scaffold
Run the scaffold command and follow the questions. Let's go through all the questions in detail:
##### 1. Enter the name of the initial data model
Name of the API model. The GraphQL queries, mutations, responses, and variable names in the code will use this value in singular and plural, kebab-case, camel-case or some other form.

```graphql title="graphql.ts"
type CarManufacturer {
    id: ID!
    createdOn: DateTime!
    savedOn: DateTime!
    createdBy: CreatedByResponse!
    title: String!
    description: String
    isNice: Boolean!
}
type CarManufacturerListResponse {
    data: [CarManufacturer]
    meta: CarManufacturerListMeta
    error: CarManufacturerError
}
```

The name value is used to create both the defaults for the package location and the package name.

The initial data model has 3 fields (`title`, `description` and `isNice`) to show you how to structure your data model.

Validation of the data model name allows only a-z and A-Z.
You can name your model all lowercase or all uppercase. It is up to you - but try to keep it in pascal-case.

##### 2. Enter the package location
A full location of the package from the root of the project. A data model name value given in the previous question is used to create the default package location.

We think it is best to organize your packages in `packages` directory, so by default it is set into that directory, but you can change it to whatever you want.

The default value is `packages/car-manufacturers/api`. Notice that the data model name `CarManufacturer` is in plural and kebab-cased.

Validation of the package location checks only if the given directory already exists.

##### 3. Enter the package name
The package name that you reference to in the code. As in the location step, the data model name value is used to create the default package name.

The default value is `@car-manufacturers/api` as we like scoping packages. You can set it to what ever you want, providing it is passing the validation.

Validation of the package name is done via the `validate-npm-package-name` package.


## The Code
Generated code contains:
1. `src/index.ts` with `GraphQLSchemaPlugin` plugin type which defines the GraphQL schema and resolvers.
2. `src/configuration.ts` with the configuration for DynamoDB table, Elasticsearch DynamoDB stream table and Elasticsearch index.
3. `src/es.ts` with helpers to build the Elasticsearch query out of the GraphQL query arguments.
4. `src/types.ts` with interfaces for resolvers, application context, arguments.
5. `__tests__/useGqlHandler.ts` with the setup of the test runners.
6. `__tests__/graphql/carManufacturers.ts` with GraphQL queries and mutations to be run.
7. `__tests__/crud.test.ts` with the tests for the resolvers.

## Elasticsearch
If you want to use the Elasticsearch functionality that is provided with the generated code you must run install mutation described in the information after the code was generated.

## Testing
You can run tests locally with command `ELASTICSEARCH_PORT=9200 LOCAL_ELASTICSEARCH=true yarn test packages/car-manufacturers/api`.
You must have local Elasticsearch started for this to work. Port can be something other than **9200**.

Generated tests cover CRUD operations and sorting by `createdOn` and `title` fields.

## Using the Generated Code in Your Project
In the main GraphQL file you need to import your package and include it in the existing handler.
```typescript title="api/code/graphql/src/index.ts"
// at the top of the file
import carManufacturerPlugin from "@car-manufacturers/api";

// somewhere after headlessCmsPlugins() in the end of the createHandler() function
carManufacturerPlugin()
```
## Deploy the API
Use the deploy command to deploy the API:
```
yarn webiny deploy api --env YOUR_ENVIRONMENT
```

## Accessing the API
When you deploy the code you will get a URL of the API, it should look something like `https://m19ckhk09hc31l.cloudfront.net`.

GraphQL is accessible on that url with addition of `/graphql`, so it is `https://m19ckhk09hc31l.cloudfront.net/graphql`.

To create new `CarManufacturer` entry, the mutation is:
```graphql
mutation CreateCarManufacturerMutation {
	carManufacturers {
		createCarManufacturer(data: {
			title: "Mercedes",
			isNice: true,
			description: "A nice car manufacturer"
		}) {
			data {
				id
				title
				isNice
				description
				createdOn
				savedOn
				createdBy {
					id
					displayName
					type
				}
			}
			error {
				message
				code
				data
			}
		}
	}
}
```

To list all the `CarManufacturer` entries, the query is:
```graphql
query ListCarManufacturerQuery {
	carManufacturers {
		listCarManufacturers {
			data {
				id
				title
				isNice
				description
				createdOn
				savedOn
				createdBy {
					id
					displayName
					type
				}
			}
			meta {
				cursor
				hasMoreItems
				totalCount
			}
			error {
				message
				code
				data
			}
		}
	}
}
```

## Building the Code
When you make changes to the code, make sure you run `yarn webiny ws run build --folder=packages/car-manufacturers/api` to actually compile your code for the deployment.

You can even have watch running for your code with `yarn webiny ws run watch --folder=packages/car-manufacturers/api`.

Of course, the `folder` value is your package location.

## Next Step...
Now that you have a functioning API, let's move onto the [Admin area](./admin-area-package).
